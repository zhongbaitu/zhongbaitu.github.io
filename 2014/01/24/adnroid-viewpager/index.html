
 <!DOCTYPE HTML>
<html lang="chinese">
<head>
  <meta charset="UTF-8">
  
    <title>Adnroid——View Pager制作App第一次使用时出现的导航介绍 | 钟买能个人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="钟买能">
    
    <meta name="description" content="这个已经不是什么新技术了。今天自己写了一次。做个简单的笔记吧。
上代码。
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.png">
    
    
    <link rel="apple-touch-icon" href="/img/me.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/me.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="钟买能个人博客" title="钟买能个人博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="钟买能个人博客">钟买能个人博客</a></h1>
				<h2 class="blog-motto">love . to love . to be love .</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/About">About</a></li>
					
						<li><a href="/Resume">Resume</a></li>
					
						<li><a href="/Works">Works</a></li>
					
					<li>
					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/01/24/adnroid-viewpager/" title="Adnroid——View Pager制作App第一次使用时出现的导航介绍" itemprop="url">Adnroid——View Pager制作App第一次使用时出现的导航介绍</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://hackeris.me" title="钟买能">钟买能</a>
    </p>
  <p class="article-time">
    <time datetime="2014-01-24T15:13:28.000Z" itemprop="datePublished">Jan 24 2014</time>
    Updated:<time datetime="2014-05-02T06:39:02.000Z" itemprop="dateModified">May 2 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
		</div>
		
		<p>这个已经不是什么新技术了。今天自己写了一次。做个简单的笔记吧。</p>
<p>上代码。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
</pre></td><td class="code"><pre><span class="keyword">package</span> com.example.viewpargertest;

<span class="keyword">import</span> java.util.ArrayList;
<span class="keyword">import</span> java.util.List;

<span class="keyword">import</span> android.app.Activity;
<span class="keyword">import</span> android.content.Intent;
<span class="keyword">import</span> android.graphics.Color;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.os.Parcelable;
<span class="keyword">import</span> android.support.v4.view.PagerAdapter;
<span class="keyword">import</span> android.support.v4.view.ViewPager;
<span class="keyword">import</span> android.support.v4.view.ViewPager.OnPageChangeListener;
<span class="keyword">import</span> android.view.LayoutInflater;
<span class="keyword">import</span> android.view.View;
<span class="keyword">import</span> android.view.View.OnClickListener;
<span class="keyword">import</span> android.view.Window;
<span class="keyword">import</span> android.widget.Button;
<span class="keyword">import</span> android.widget.TextView;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> {</span>

    <span class="keyword">private</span> ViewPager myViewPager; <span class="comment">// 页卡内容</span>

    <span class="keyword">private</span> List&lt;View&gt; list; <span class="comment">// 存放页卡</span>

    <span class="keyword">private</span> TextView dot1,dot2,dot3;    <span class="comment">// 这些点都是文字</span>

    <span class="keyword">private</span> Button startButton;                 <span class="comment">// 按钮，“开始体验”</span>

    <span class="annotation">@Override</span>
    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span>(Bundle savedInstanceState) {
        <span class="keyword">super</span>.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        initDot();
        initViewPager();
    }
&lt;!--more--&gt;
    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initDot</span>(){
        dot1=(TextView) <span class="keyword">this</span>.findViewById(R.id.textView1);      <span class="comment">// 这些点都是文字</span>
        dot2=(TextView) <span class="keyword">this</span>.findViewById(R.id.textView2);
        dot3=(TextView) <span class="keyword">this</span>.findViewById(R.id.textView3);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initViewPager</span>(){
        myViewPager=(ViewPager) <span class="keyword">this</span>.findViewById(R.id.viewPager);
        list=<span class="keyword">new</span> ArrayList&lt;View&gt;();

        LayoutInflater inflater=getLayoutInflater();

        View view =inflater.inflate(R.layout.lay3, <span class="keyword">null</span>);  <span class="comment">// 只是为了等下 findviewbuid 而独立拿出来赋给 view</span>

        list.add(inflater.inflate(R.layout.lay1, <span class="keyword">null</span>));
        list.add(inflater.inflate(R.layout.lay2, <span class="keyword">null</span>));
        list.add(view);

        myViewPager.setAdapter(<span class="keyword">new</span> MyPagerAdapter(list));

        myViewPager.setOnPageChangeListener(<span class="keyword">new</span> MyPagerChangeListener());

        startButton=(Button) view.findViewById(R.id.start);      <span class="comment">// 与上面对应，获取这个按钮</span>

        startButton.setOnClickListener(<span class="keyword">new</span> OnClickListener() {

            <span class="annotation">@Override</span>
            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span>(View v) {
                Intent intent=<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,Main.class);

                startActivity(intent);

            }
        });

    }

    class MyPagerAdapter extends PagerAdapter {
        <span class="keyword">public</span> List&lt;View&gt; mListViews;

        <span class="keyword">public</span> <span class="title">MyPagerAdapter</span>(List&lt;View&gt; mListViews) {
            <span class="keyword">this</span>.mListViews = mListViews;
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span>(View arg0, <span class="keyword">int</span> arg1, Object arg2) {
            ((ViewPager) arg0).removeView(mListViews.get(arg1));
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finishUpdate</span>(View arg0) {
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span>() {
            <span class="keyword">return</span> mListViews.size();
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> Object <span class="title">instantiateItem</span>(View arg0, <span class="keyword">int</span> arg1) {
            ((ViewPager) arg0).addView(mListViews.get(arg1), <span class="number">0</span>);
            <span class="keyword">return</span> mListViews.get(arg1);
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span>(View arg0, Object arg1) {
            <span class="keyword">return</span> arg0 == (arg1);
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restoreState</span>(Parcelable arg0, ClassLoader arg1) {
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> Parcelable <span class="title">saveState</span>() {
            <span class="keyword">return</span> <span class="keyword">null</span>;
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startUpdate</span>(View arg0) {
        }
    }

    class MyPagerChangeListener implements OnPageChangeListener{

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span>(<span class="keyword">int</span> arg0) {
            <span class="comment">// TODO Auto-generated method stub</span>
            <span class="keyword">switch</span> (arg0) {                           <span class="comment">// 设置点的颜色</span>
            <span class="keyword">case</span> <span class="number">0</span>:
                dot1.setTextColor(Color.WHITE);
                dot2.setTextColor(Color.BLACK);
                dot3.setTextColor(Color.BLACK);
                <span class="keyword">break</span>;

            <span class="keyword">case</span> <span class="number">1</span>:
                dot1.setTextColor(Color.BLACK);
                dot2.setTextColor(Color.WHITE);
                dot3.setTextColor(Color.BLACK);
                <span class="keyword">break</span>;

            <span class="keyword">case</span> <span class="number">2</span>:
                dot1.setTextColor(Color.BLACK);
                dot2.setTextColor(Color.BLACK);
                dot3.setTextColor(Color.WHITE);
                <span class="keyword">break</span>;

            }
        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span>(<span class="keyword">int</span> arg0) {
            <span class="comment">// TODO Auto-generated method stub</span>

        }

        <span class="annotation">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span>(<span class="keyword">int</span> arg0, <span class="keyword">float</span> arg1, <span class="keyword">int</span> arg2) {
            <span class="comment">// TODO Auto-generated method stub</span>

        }

    }
}
</pre></td></tr></table></figure>

<p>每个页面都是一张图片，在 xml 定义好几个 file，再把它们都实例化 inflater 为 view, 加入到 list 中。再把 list 加到适配器 PagerAdapter 中。myViewPager 绑定适配器。OK。已经完成了。运行可以手动滑动转页了。</p>
<p>再下来就是那几个导航的点。</p>
<p>上 XML。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">RelativeLayout</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>
    <span class="attribute">xmlns:tools</span>=<span class="value">"http://schemas.android.com/tools"</span>
    <span class="attribute">android:id</span>=<span class="value">"@+id/RelativeLayout1"</span>
    <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span>
    <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span>
    <span class="attribute">android:orientation</span>=<span class="value">"vertical"</span>
    <span class="attribute">tools:context</span>=<span class="value">".MainActivity"</span> &gt;</span>
    
    <span class="tag">&lt;<span class="title">android.support.v4.view.ViewPager
</span>        <span class="attribute">android:id</span>=<span class="value">"@+id/viewPager"</span>
        <span class="attribute">android:layout_width</span>=<span class="value">"fill_parent"</span>
        <span class="attribute">android:layout_height</span>=<span class="value">"fill_parent"</span>/&gt;</span>

    <span class="tag">&lt;<span class="title">LinearLayout
</span>        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span>
        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span>
        <span class="attribute">android:layout_alignParentBottom</span>=<span class="value">"true"</span>
        <span class="attribute">android:layout_centerHorizontal</span>=<span class="value">"true"</span>
        <span class="attribute">android:layout_marginBottom</span>=<span class="value">"72dp"</span> &gt;</span>

        <span class="tag">&lt;<span class="title">TextView
</span>            <span class="attribute">android:id</span>=<span class="value">"@+id/textView1"</span>
            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:text</span>=<span class="value">"."</span>
            <span class="attribute">android:textColor</span>=<span class="value">"#FFF"</span>
            <span class="attribute">android:textSize</span>=<span class="value">"100dp"</span> /&gt;</span>

        <span class="tag">&lt;<span class="title">TextView
</span>            <span class="attribute">android:id</span>=<span class="value">"@+id/textView2"</span>
            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:text</span>=<span class="value">"."</span>
            <span class="attribute">android:textSize</span>=<span class="value">"100dp"</span> /&gt;</span>

        <span class="tag">&lt;<span class="title">TextView
</span>            <span class="attribute">android:id</span>=<span class="value">"@+id/textView3"</span>
            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span>
            <span class="attribute">android:text</span>=<span class="value">"."</span>
            <span class="attribute">android:textSize</span>=<span class="value">"100dp"</span> /&gt;</span>
    <span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span>

<span class="tag">&lt;/<span class="title">RelativeLayout</span>&gt;</span>
</pre></td></tr></table></figure>

<p>这里我用了 RelativeLayout 布局。目的是为了使这几个导航点叠加在页面图片的上面。</p>
<p>可以看到，其实这几个点都是 TextView。</p>
<p>myViewPager 设置监听 OnPageChangeListener，在页面变化的时候这几个 TextView 变一下颜色就可以了。在最后一个页面卡添加多一个按钮 ”开始体验“。到了最后一个，按一按。就可以开始我的 QQ 空间生活咯。完工。</p>
<p>上图。</p>
<p><a href="http://segmentfault.com/img/bVbPKF/view" title=" 点击查看原图 " target="_blank"><img src="http://segmentfault.com/img/bVbPKF" alt=" 请输入图片描述 "></a></p>
<p><a href="http://segmentfault.com/img/bVbPKM/view" title=" 点击查看原图 " target="_blank"><img src="http://segmentfault.com/img/bVbPKM" alt=" 请输入图片描述 "></a></p>
<p><a href="http://segmentfault.com/img/bVbPKN/view" title=" 点击查看原图 " target="_blank"><img src="http://segmentfault.com/img/bVbPKN" alt=" 请输入图片描述 "></a></p>
<p>这里用到的图都是 QQ 空间客户端截取下来的。有点就是。官方那几个导航点竟然是图片来的。不是动态的。~ 呀<del>~</del></p>
<p>最后那张图那个按钮是我自己加上去的。官方的是继续向右滑动就进入到主界面。额~ 这个不知道怎么实现。求大牛指点</p>
<hr>
<p>到此结束。欢迎吐槽。其中这里用到的 PagerAdapter 个人还不是很能理解。继续大牛指点指点吗。~~~~ 先继续研究官方 API 去咯。</p>
<hr>
  
	</div>
	<center>
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- 文章底部栏广告 -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:728px;height:90px"
         data-ad-client="ca-pub-5613406035583127"
         data-ad-slot="5556362497"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    </center>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/安卓/">安卓</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/安卓前端开发/">安卓前端开发</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://hackeris.me/2014/01/24/adnroid-viewpager/" data-title="Adnroid——View Pager制作App第一次使用时出现的导航介绍 | 钟买能个人博客" data-tsina="2162115292" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/01/28/android_SaveInstanceState/" title="Android保存当前活动状态">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Android保存当前活动状态</span>
</a>
</div>


<div class="next">
<a href="/2014/01/20/git_github1/"  title="Git之Github使用（一）：Push代码到Github">
 <strong>NEXT:</strong><br/> 
 <span>Git之Github使用（一）：Push代码到Github
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  	<center>
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- 文章底部栏广告 -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:728px;height:90px"
         data-ad-client="ca-pub-5613406035583127"
         data-ad-slot="5556362497"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    </center>

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/git版本控制/" title="git版本控制">git版本控制<sup>3</sup></a></li>
		
			<li><a href="/categories/java杂锦/" title="java杂锦">java杂锦<sup>1</sup></a></li>
		
			<li><a href="/categories/struts/" title="struts">struts<sup>2</sup></a></li>
		
			<li><a href="/categories/生活点滴/外包/" title="外包">外包<sup>1</sup></a></li>
		
			<li><a href="/categories/安卓前端开发/" title="安卓前端开发">安卓前端开发<sup>5</sup></a></li>
		
			<li><a href="/categories/安卓网络开发/安卓开发杂锦/" title="安卓开发杂锦">安卓开发杂锦<sup>1</sup></a></li>
		
			<li><a href="/categories/安卓开发杂锦/" title="安卓开发杂锦">安卓开发杂锦<sup>8</sup></a></li>
		
			<li><a href="/categories/安卓网络开发/" title="安卓网络开发">安卓网络开发<sup>3</sup></a></li>
		
			<li><a href="/categories/生活点滴/" title="生活点滴">生活点滴<sup>13</sup></a></li>
		
			<li><a href="/categories/电脑常识杂锦/" title="电脑常识杂锦">电脑常识杂锦<sup>2</sup></a></li>
		
			<li><a href="/categories/翻译/" title="翻译">翻译<sup>3</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Git权威指南/" title="Git权威指南">Git权威指南<sup>2</sup></a></li>
		
			<li><a href="/tags/RxAndroid/" title="RxAndroid">RxAndroid<sup>2</sup></a></li>
		
			<li><a href="/tags/RxJava/" title="RxJava">RxJava<sup>2</sup></a></li>
		
			<li><a href="/tags/android/" title="android">android<sup>9</sup></a></li>
		
			<li><a href="/tags/git/" title="git">git<sup>3</sup></a></li>
		
			<li><a href="/tags/github/" title="github">github<sup>3</sup></a></li>
		
			<li><a href="/tags/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		
			<li><a href="/tags/html5/" title="html5">html5<sup>1</sup></a></li>
		
			<li><a href="/tags/java/" title="java">java<sup>1</sup></a></li>
		
			<li><a href="/tags/java ee/" title="java ee">java ee<sup>2</sup></a></li>
		
			<li><a href="/tags/struts/" title="struts">struts<sup>2</sup></a></li>
		
			<li><a href="/tags/兼职/" title="兼职">兼职<sup>2</sup></a></li>
		
			<li><a href="/tags/函数响应式编程/" title="函数响应式编程">函数响应式编程<sup>2</sup></a></li>
		
			<li><a href="/tags/大学/" title="大学">大学<sup>6</sup></a></li>
		
			<li><a href="/tags/安卓/" title="安卓">安卓<sup>11</sup></a></li>
		
			<li><a href="/tags/工作/" title="工作">工作<sup>2</sup></a></li>
		
			<li><a href="/tags/年度总结/" title="年度总结">年度总结<sup>1</sup></a></li>
		
			<li><a href="/tags/思想/" title="思想">思想<sup>2</sup></a></li>
		
			<li><a href="/tags/感悟/" title="感悟">感悟<sup>8</sup></a></li>
		
			<li><a href="/tags/毕设/" title="毕设">毕设<sup>2</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hi ^_^  I am ZhongMaiNeng . I love to share anything here. <br/>
			for my collage . for coding . for traveling . for all of my life.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2162115292" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/zhongbaitu" target="_blank" title="github"></a>
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://hackeris.me" target="_blank" title="钟买能">钟买能</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"zhongsir"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>


<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49779500-1', 'hackeris.me');  
ga('send', 'pageview');
</script>


  </body>
</html>
